(this["webpackJsonpsisal-mvp-betting"]=this["webpackJsonpsisal-mvp-betting"]||[]).push([[0],{20:function(e,t,a){e.exports=a.p+"static/media/logo.30c9b0e5.svg"},23:function(e,t,a){e.exports=a(38)},29:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){"use strict";a.r(t);var n=a(17),c=a.n(n),l=(a(28),a(0)),r=a.n(l),s=a(2),o=a(6),i=a(14),m=a(10),u=function(){return{login:function(e,t){return"user"===e&&"user"===t?(localStorage.setItem("token","user_token"),localStorage.setItem("role","user"),console.log("made login"),Promise.resolve("logged as user")):"admin"===e&&"admin"===t?(localStorage.setItem("token","admin_token"),localStorage.setItem("role","admin"),Promise.resolve("logged as admin")):Promise.reject(new Error("errors.wrong_credentials"))},isAdmin:function(){return"admin"===localStorage.getItem("role")},isAuthenticated:function(){return null!==localStorage.getItem("token")},logout:function(){return localStorage.removeItem("token"),localStorage.removeItem("role"),console.log("logout?"),Promise.resolve("logged out")}}},d=u(),E=d.login,g=d.logout,b=function(e){var t=Object(l.useState)(""),a=Object(m.a)(t,2),n=a[0],c=a[1],s=Object(l.useState)(""),o=Object(m.a)(s,2),u=o[0],d=o[1],b=Object(l.useReducer)((function(e,t){return[].concat(Object(i.a)(e),Object(i.a)(t))}),[]),p=Object(m.a)(b,2),v=p[0],f=p[1];r.a.useEffect((function(){}));return{username:n,password:u,sendForm:function(t,a){t.preventDefault(),f([]),n.length&&u.length?E(n,u).then((function(){a("updateUserStatus"),e.push("/bets")})).catch((function(e){f([e.message])})):f(["errors.provide_credentials"])},logoutAndRedirect:function(t){g().then((function(){t("updateUserStatus"),e.push("/")}))},setUsername:c,setPassword:d,loginErrors:v}},p=a(8),v=a.n(p),f=function(e){return{setIsAuthenticated:function(e){return{isAuthenticated:e}},setIsAdmin:function(e){return{isAdmin:e}}}},h=u(),N=h.isAdmin,A=h.isAuthenticated,j=function(e){return{initUser:function(){return e("setIsAuthenticated",A()),e("setIsAdmin",N()),new Promise((function(e,t){setTimeout((function(){e("Promise A win!")}),800)}))},updateUserStatus:function(){return e("setIsAuthenticated",A()),e("setIsAdmin",N()),Promise.resolve(!0)}}},w={isAdmin:void 0,isAuthenticated:void 0},O=(0,v.a.Store().createStore)({initialState:w,mutations:f,actions:j}),S=O.createContext,_=O.addToContext;S();var C=v.a.Translations().store,k=_(C.initialState,C.mutations,C.actions),x=(a(29),a(22)),I=function(){var e=Object(l.useContext)(k),t=e.dispatch,a=e.state;return Object(x.a)({},(void 0===a.isAuthenticated&&t("updateUserStatus"),{isAuthenticated:a.isAuthenticated,isAdmin:a.isAdmin}))},P=function(){var e=Object(o.g)(),t=Object(l.useContext)(k).dispatch,a=I(),n=a.isAuthenticated,c=a.isAdmin,i=b(e).logoutAndRedirect;return r.a.createElement("div",{className:"user-status"},r.a.createElement("p",null,n?"Logged as: ".concat(c?"Admin":"User"):"Not logged"),r.a.createElement("span",null,"\\\\"),n?r.a.createElement("button",{onClick:function(){return i(t)},type:"button"},"Logout"):r.a.createElement(s.b,{to:"/"},"Login"))},y=a(20),U=a.n(y),L=(a(35),function(){var e=Object(l.useContext)(k),t=e.state,a=e.dispatch,n=t.t,c=t.otherLanguage;return r.a.createElement("header",{className:"app-header"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement(s.b,{to:"/",className:"logo"},r.a.createElement("img",{src:U.a,className:"App-logo",alt:"logo"}),r.a.createElement("h1",null,"POC"))),r.a.createElement("div",{className:"col-md-6"},r.a.createElement(P,null)),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("button",{type:"button",className:"btn btn-primary switch-language",onClick:function(){return a("switchLanguage")}},n("cta.switch_to")," (",c(),")")))))}),T=function(){var e=Object(l.useContext)(k).state.t;return r.a.createElement("div",{className:"container",id:"login-form"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-5 offset-2 mt-3 mb-3"},r.a.createElement("h1",null,e("not_authorized"))),r.a.createElement("div",{className:"col-md-5 offset-2 mt-3"},r.a.createElement(s.b,{to:"/",className:"logo"}," < ",e("back")))))},F=function(e){var t=e.Component,a=e.canActivate,n=Object(o.g)(),c=Object(o.h)(),s=Object(l.useContext)(k).state.currentLanguage;return a()?r.a.createElement(t,{history:n,language:s(),match:c}):r.a.createElement(T,null)},R=a(21),J=a.n(R),z=(a(36),function(e){var t=e.history,a=b(t),n=a.username,c=a.password,s=a.sendForm,i=a.setUsername,m=a.setPassword,u=a.loginErrors,d=Object(l.useContext)(k),E=d.state,g=d.dispatch,p=I().isAuthenticated,v=E.t;return r.a.createElement(r.a.Fragment,null,p?r.a.createElement(o.a,{to:"/bets"}):r.a.createElement("div",{className:"container",id:"login-form"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-5 offset-2 mt-3 mb-3"},r.a.createElement("h1",null,v("login"))),r.a.createElement("div",{className:"col-md-5 offset-2 mt-3"},r.a.createElement("form",{onSubmit:function(e){return s(e,g)}},r.a.createElement("div",{className:"errors"},u.map((function(e){return r.a.createElement("p",{key:e},v(e))}))),r.a.createElement("input",{type:"text",value:n,onChange:function(e){return i(e.target.value)},placeholder:"Username"}),r.a.createElement("input",{type:"text",value:c,onChange:function(e){return m(e.target.value)},placeholder:"Password"}),r.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"LOGIN"}))),r.a.createElement("div",{className:"col-md-3 mt-3"},r.a.createElement("div",{className:"info-users"},r.a.createElement("h5",null,"Test Users:"),r.a.createElement("ul",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("span",null,"username:")," user"),r.a.createElement("li",null,r.a.createElement("span",null,"password:")," user"),r.a.createElement("li",null,r.a.createElement("span",null,"role:")," user"))),r.a.createElement("hr",null),r.a.createElement("ul",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("span",null,"username:")," admin"),r.a.createElement("li",null,r.a.createElement("span",null,"password:")," admin"),r.a.createElement("li",null,r.a.createElement("span",null,"role:")," admin"))))))))}),B=(a(37),function(){var e=Object(l.useContext)(k).state.t,t=[{id:1,url:"bets/1",label:"".concat(e("cta.go_to_bet"),":1"),class:""},{id:2,url:"bets/2",label:"".concat(e("cta.go_to_bet"),":2"),class:""},{id:3,url:"bets/3",label:"".concat(e("cta.go_to_bet"),":3"),class:""},{id:4,url:"module",label:"".concat(e("cta.go_to_admin_module")," (").concat(e("just_admin"),")"),class:"just-admin"}];return r.a.createElement("div",{className:"bets-list"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-5 offset-2 mt-3 mb-3"},r.a.createElement("h1",null,e("index"))),t.map((function(e,t){return r.a.createElement("div",{key:e.id,className:"col-md-4 ".concat(t%2===0?"offset-md-2":"")},r.a.createElement(s.b,{to:e.url},r.a.createElement("div",{className:"card"},r.a.createElement("span",null,e.label))))})))))}),D=function(e){var t=e.match,a=Object(l.useContext)(k).state.t;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8 offset-2 mt-3"},r.a.createElement("nav",{"aria-label":"breadcrumb"},r.a.createElement("ol",{className:"breadcrumb"},r.a.createElement("li",{className:"breadcrumb-item"},r.a.createElement(s.b,{to:"/"},a("back"))),r.a.createElement("li",{className:"breadcrumb-item active","aria-current":"page"},a("bet")," #",t.params.id))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8 offset-md-2"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"p-4"},a("this_is_the_bet")," #",t.params.id)))))},G=u(),q=G.isAdmin,H=G.isAuthenticated,K=[{path:"/module",component:J.a,canActivate:q},{path:"/bets/:id",component:D,canActivate:H},{path:"/bets/",component:B,canActivate:H},{path:"",component:z,canActivate:function(){return!0}}],M=v.a.Store().ContextProvider,Q=v.a.Translations().LanguagePack,V=function(){return r.a.createElement(Q,{languagePack:"global",language:"en"},r.a.createElement(M,{context:k},r.a.createElement(s.a,null,r.a.createElement(L,null),r.a.createElement(o.d,null,K.map((function(e){return r.a.createElement(o.b,{key:e.path,path:e.path},r.a.createElement(F,{Component:e.component,canActivate:e.canActivate}))}))))))};c.a.render(V(),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.bfa1e996.chunk.js.map